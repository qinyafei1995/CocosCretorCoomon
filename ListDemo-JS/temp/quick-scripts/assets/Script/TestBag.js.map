{"version":3,"sources":["TestBag.js"],"names":["List","require","cc","Class","extends","Component","properties","list","bagItem","Prefab","curPage","Label","onLoad","totalItemNum","pagePreNum","pageTotalNum","Math","ceil","numItems","onPageChange","onListRender","item","idx","childrenCount","n","bi","children","exactIdx","getComponentInChildren","string","instantiate","addChild","pageNum","pageN","curPageNum"],"mappings":";;;;;;AAAA;;;;;;AAMA,IAAMA,OAAOC,QAAQ,MAAR,CAAb;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAMP,IADE;AAERQ,iBAASN,GAAGO,MAFJ;AAGRC,iBAASR,GAAGS;AAHJ,KAHP;;AASLC,YAAQ,kBAAY;AAChB,aAAKC,YAAL,GAAoB,EAApB,CADgB,CACQ;AACxB,aAAKC,UAAL,GAAkB,EAAlB,CAFgB,CAEQ;AACxB,aAAKC,YAAL,GAAoBC,KAAKC,IAAL,CAAU,KAAKJ,YAAL,GAAoB,KAAKC,UAAnC,CAApB,CAHgB,CAGoD;AACpE,aAAKP,IAAL,CAAUW,QAAV,GAAqB,KAAKH,YAA1B;AACA,aAAKI,YAAL;AACH,KAfI;;AAiBLC,gBAjBK,wBAiBQC,IAjBR,EAiBcC,GAjBd,EAiBmB;AACpB,YAAID,KAAKE,aAAT,EAAwB;AACpB,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIH,KAAKE,aAAzB,EAAwCC,GAAxC,EAA6C;AACzC,oBAAIC,KAAKJ,KAAKK,QAAL,CAAcF,CAAd,CAAT;AACA,oBAAIG,WAAYL,MAAM,KAAKR,UAAZ,GAA0BU,CAAzC;AACAC,mBAAGG,sBAAH,CAA0B1B,GAAGS,KAA7B,EAAoCkB,MAApC,GAA6CF,WAAW,KAAKd,YAAhB,GAAgCc,WAAW,CAA3C,GAAgD,EAA7F;AACH;AACJ,SAND,MAMO;AACH;AACA,iBAAK,IAAIH,KAAI,CAAb,EAAgBA,KAAI,KAAKV,UAAzB,EAAqCU,IAArC,EAA0C;AACtC,oBAAIC,MAAKvB,GAAG4B,WAAH,CAAe,KAAKtB,OAApB,CAAT;AACAa,qBAAKU,QAAL,CAAcN,GAAd;AACA,oBAAIE,YAAYL,MAAM,KAAKR,UAAZ,GAA0BU,EAAzC;AACAC,oBAAGG,sBAAH,CAA0B1B,GAAGS,KAA7B,EAAoCkB,MAApC,GAA6CF,YAAW,KAAKd,YAAhB,GAAgCc,YAAW,CAA3C,GAAgD,EAA7F;AACH;AACJ;AACJ,KAjCI;AAmCLR,gBAnCK,wBAmCQa,OAnCR,EAmCiB;AAClB,YAAIC,QAAQD,WAAW,IAAX,GAAkB,KAAKzB,IAAL,CAAU2B,UAA5B,GAAyCF,OAArD;AACA,aAAKtB,OAAL,CAAamB,MAAb,GAAsB,WAAWI,QAAQ,CAAnB,CAAtB;AACH;AAtCI,CAAT","file":"TestBag.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["/******************************************\n * @author kL <klk0@qq.com>\n * @date 2019/9/27\n * @doc TestBag.\n * @end\n ******************************************/\nconst List = require('List');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        list: List,\n        bagItem: cc.Prefab,\n        curPage: cc.Label,\n    },\n\n    onLoad: function () {\n        this.totalItemNum = 90; //总Item数\n        this.pagePreNum = 16;   //每页Item数量\n        this.pageTotalNum = Math.ceil(this.totalItemNum / this.pagePreNum); //总页数\n        this.list.numItems = this.pageTotalNum;\n        this.onPageChange();\n    },\n\n    onListRender(item, idx) {\n        if (item.childrenCount) {\n            for (let n = 0; n < item.childrenCount; n++) {\n                let bi = item.children[n];\n                let exactIdx = (idx * this.pagePreNum) + n;\n                bi.getComponentInChildren(cc.Label).string = exactIdx < this.totalItemNum ? (exactIdx + 1) : '';\n            }\n        } else {\n            // 我这里就不考虑性能了，直接实例化。\n            for (let n = 0; n < this.pagePreNum; n++) {\n                let bi = cc.instantiate(this.bagItem);\n                item.addChild(bi);\n                let exactIdx = (idx * this.pagePreNum) + n;\n                bi.getComponentInChildren(cc.Label).string = exactIdx < this.totalItemNum ? (exactIdx + 1) : '';\n            }\n        }\n    },\n\n    onPageChange(pageNum) {\n        let pageN = pageNum == null ? this.list.curPageNum : pageNum;\n        this.curPage.string = '当前页数：' + (pageN + 1);\n    },\n\n});"]}